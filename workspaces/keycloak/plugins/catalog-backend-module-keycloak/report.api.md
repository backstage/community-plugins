## API Report File for "@backstage-community/plugin-catalog-backend-module-keycloak"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { BackendFeature } from '@backstage/backend-plugin-api';
import type { Config } from '@backstage/config';
import type { EntityProvider } from '@backstage/plugin-catalog-node';
import type { EntityProviderConnection } from '@backstage/plugin-catalog-node';
import { ExtensionPoint } from '@backstage/backend-plugin-api';
import type { GroupEntity } from '@backstage/catalog-model';
import type GroupRepresentation from '@keycloak/keycloak-admin-client/lib/defs/groupRepresentation';
import type { LoggerService } from '@backstage/backend-plugin-api';
import type { SchedulerService } from '@backstage/backend-plugin-api';
import type { SchedulerServiceTaskRunner } from '@backstage/backend-plugin-api';
import type { SchedulerServiceTaskScheduleDefinition } from '@backstage/backend-plugin-api';
import type { UserEntity } from '@backstage/catalog-model';
import type UserRepresentation from '@keycloak/keycloak-admin-client/lib/defs/userRepresentation';

// @public
const catalogModuleKeycloakEntityProvider: BackendFeature;
export default catalogModuleKeycloakEntityProvider;

// @public (undocumented)
export interface GroupRepresentationWithParent extends GroupRepresentation {
  // (undocumented)
  members?: string[];
  // (undocumented)
  parent?: string;
  // (undocumented)
  parentId?: string;
}

// @public (undocumented)
export interface GroupRepresentationWithParentAndEntity
  extends GroupRepresentationWithParent {
  // (undocumented)
  entity: GroupEntity;
}

// @public
export type GroupTransformer = (
  entity: GroupEntity,
  group: GroupRepresentation,
  realm: string,
) => Promise<GroupEntity | undefined>;

// @public
export class KeycloakOrgEntityProvider implements EntityProvider {
  constructor(options: {
    id: string;
    provider: KeycloakProviderConfig;
    logger: LoggerService;
    taskRunner: SchedulerServiceTaskRunner;
    userTransformer?: UserTransformer;
    groupTransformer?: GroupTransformer;
  });
  // (undocumented)
  connect(connection: EntityProviderConnection): Promise<void>;
  // (undocumented)
  static fromConfig(
    deps: {
      config: Config;
      logger: LoggerService;
    },
    options: (
      | {
          schedule: SchedulerServiceTaskRunner;
        }
      | {
          scheduler: SchedulerService;
        }
    ) & {
      userTransformer?: UserTransformer;
      groupTransformer?: GroupTransformer;
    },
  ): KeycloakOrgEntityProvider[];
  // (undocumented)
  getProviderName(): string;
  read(options?: { logger?: LoggerService }): Promise<void>;
  // (undocumented)
  schedule(taskRunner: SchedulerServiceTaskRunner): void;
}

// @public
export interface KeycloakOrgEntityProviderOptions {
  groupTransformer?: GroupTransformer;
  id: string;
  logger: LoggerService;
  schedule?: SchedulerServiceTaskRunner;
  scheduler?: SchedulerService;
  userTransformer?: UserTransformer;
}

// @public
export type KeycloakProviderConfig = {
  id: string;
  baseUrl: string;
  username?: string;
  password?: string;
  clientId?: string;
  clientSecret?: string;
  realm: string;
  loginRealm?: string;
  schedule?: SchedulerServiceTaskScheduleDefinition;
  userQuerySize?: number;
  groupQuerySize?: number;
};

// @public
export type KeycloakTransformerExtensionPoint = {
  setUserTransformer(userTransformer: UserTransformer): void;
  setGroupTransformer(groupTransformer: GroupTransformer): void;
};

// @public
export const keycloakTransformerExtensionPoint: ExtensionPoint<KeycloakTransformerExtensionPoint>;

// @public (undocumented)
export const noopGroupTransformer: GroupTransformer;

// @public (undocumented)
export const noopUserTransformer: UserTransformer;

// @public
export const sanitizeEmailTransformer: UserTransformer;

// @public (undocumented)
export interface UserRepresentationWithEntity extends UserRepresentation {
  // (undocumented)
  entity: UserEntity;
}

// @public
export type UserTransformer = (
  entity: UserEntity,
  user: UserRepresentation,
  realm: string,
  groups: GroupRepresentationWithParentAndEntity[],
) => Promise<UserEntity | undefined>;

// (No @packageDocumentation comment for this package)
```
